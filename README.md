[![Latest Stable Version](https://poser.pugx.org/carono/turbotext-api/v/stable)](https://packagist.org/packages/carono/turbotext-api)
[![Total Downloads](https://poser.pugx.org/carono/turbotext-api/downloads)](https://packagist.org/packages/carono/turbotext-api)
[![Scrutinizer Code Quality](https://scrutinizer-ci.com/g/carono/turbotext-api/badges/quality-score.png?b=master)](https://scrutinizer-ci.com/g/carono/turbotext-api/?branch=master)

Введение
========
Данный клиент разработан для работы с сайтом https://www.turbotext.ru.  
Класс клиента генерируется автоматически на основе документации https://www.turbotext.ru/api-info/  
Разработано по заказу https://bonica.pro

Инсталяция
==========
`composer require carono/turbotext-api`

Использование
=============
```php
// Получение баланса
  
$client = new \carono\turbotext\Client();
$client->apiKey = 'your-api-key';
  
$response = $client->order()->getBalance();
  
// Создание заказа
  
$config = new OrderConfig();
$config->order_title = 'Заголовок';
$config->order_type = 1;
$config->folder_id = 0;
$config->order_description = 'Описание';
$config->order_text = 'Текст';
$config->order_size_from = 500;
$config->order_size_to = 600;
$config->order_price = 30;
  
$response = $client->order()->createOrder($config);
```

|Метод|Описание
|-----|--------
|$client->order()|Работа с заказами на копирайтинг/рерайтинг/переводы
|$client->user()|Работа со списками исполнителей
|$client->microTask()|Работа с микрозадачами
|$client->message()|Работа с личными сообщениями


Работа с заказами на копирайтинг/рерайтинг/переводы
===================================================
```php
$client->order();
```

|Метод|Описание|Входные данные|Выходные данные
|-----|--------|--------------|---------------
|getFolders|Возвращает все папки пользователя||**folders** (array) - массив с папками <br /><br />**id** (int) - уникальный идентификатор папки<br /><br />**name** (text) - имя папки
|getBalance|Возвращает количество доступных средств||**balance** (float) - количество денег на балансе<br /><br />**blocked_money** (float) - количество замороженных средств для выполнения заказов и микрозадач 
|createFolder|Создаёт новую папку|**name** (text) - имя новой папки|**folder_id** (int) - уникальный идентификатор созданной папки 
|getOrders|Возвращает все заказы пользователя в папке folder_id. Если folder_id не указано, возвращает все заказы. |**folder_id** (text) - уникальный идентификатор папки (необязательный параметр)|**orders** (array) - массив с заказами <br /><br />**id** (int) - уникальный идентификатор (номер) заказа<br /><br />**name** (text) - название заказа<br /><br />**price** (float) - стоимость за 1000 знаков<br /><br />**status** (int) - статус заказа (1 - в поиске исполнителя, 2 – в работе, 3 – ожидает проверки, 4 – на доработке, 5 – одобрен и оплачен) 
|createOrder|Создаёт новый заказ|**order_title** (text) - название заказа<br /><br />**order_type** (int) - тип заказа (1 - копирайтинг, 2 - рерайтинг)<br /><br />**order_description** (text) - задание для копирайтера, описание заказа<br /><br />**order_text** (text) - статья для рерайта, если вы заказываете рерайтинг<br /><br />**order_size_from** (int) - минимальное количество знаков, которое должно быть в тексте (от 300 до 98000) <br /><br />**order_size_to** (int) - максимальное количество знаков, которое должно быть в тексте (от 300 до 99000) <br /><br />**folder_id** (int) - идентификатор папки, в которую нужно добавить заказ<br /><br />**order_time** (int) - количество часов за которое нужно выполнить заказ (от 2 до 96). Необязательный параметр, значение по умолчанию - 10. <br /><br />**order_price** (int) - стоимость за 1000 знаков с пробелами (от 22)<br /><br />**order_who_can_work** (int) - кто может выполнить заказ. 0 - любой исполнитель, 1 - только исполнитель определённого уровня (нужно указать уровень в поле order_who_can_work_value), 2 - только исполнители из белого списка (нужно указать id списка в поле order_who_can_work_value), 3 - только один определённый исполнитель (нужно указать id исполнителя в поле order_who_can_work_value). Параметр необязательный. Значение по умолчанию - 0. <br /><br />**order_who_can_work_value** (int) - в случае, если вы ограничили заказ, сделав его доступным определённой группе исполнителей параметром order_who_can_work, в этом параметре необходимо уточнить свой выбор: В случае, если вы хотите сделать заказ доступным только исполнителям определённого уровня, то укажите в этом параметре цифру, соответствующую уровню (1 - новичок, 2 - базовый уровень, 3 - высокий уровень, 4 - профи). В случае, если вы хотите сделать заказ доступным только для определённого белого списка, то укажите id списка в этом поле. В случае, если вы хотите сделать персональный заказ только для одного конкретного исполнителя, то укажите в этом поле его id <br /><br />**order_need_anons** (int) - Нужен ли вам анонс? 1 - да, 0 - нет. Необязательный параметр, значение по умолчанию - 0 <br /><br />**order_need_corrector** (int) - Нужно ли проверить текст корректором? 1 - да, 0 - нет. Необязательный параметр, значение по умолчанию - 0 <br /><br />**order_need_unique** (int) - Нужно ли проверить текст на уникальность? 1 - да, 0 - нет. Необязательный параметр, значение по умолчанию - 0 <br /><br />**order_need_image** (int) - Нужно ли прикрепить к заказу картинку? 1 - да, 0 - нет. Необязательный параметр, значение по умолчанию - 0 <br /><br />**draft** (int) - Сохранить заказ как черновик? 1 - да, 0 - нет. Необязательный параметр, значение по умолчанию - 0 |**order_id** (int) - уникальный идентификатор созданного заказа 
|getOrder|Получает информацию о заказе order_id|**order_id** (int) - уникальный идентификатор (номер) заказа.|**name** (text) - название заказа<br /><br />**price** (float) - стоимость за 1000 знаков<br /><br />**status** (int) - статус заказа (1 - в поиске исполнителя, 2 – в работе, 3 – ожидает проверки, 4 – на доработке, 5 – одобрен и оплачен) <br /><br />**worker_id** (int) - уникальный идентификатор исполнителя, работающего над заказом. Если равно 0, значит над заказом никто не работает. <br /><br />**description** (text) - задание для копирайтера, описание заказа<br /><br />**date_add** (datetime) - дата публикации заказа<br /><br />**date_upd** (datetime) - дата последнего обновления заказа<br /><br />**type** (int) - тип заказа (1 - копирайтинг, 2 - рерайтинг)<br /><br />**min_ch** (int) - минимальное необходимое количество символов<br /><br />**max_ch** (int) - максимальное необходимое количество символов<br /><br />**title** (text) - заголовок статьи<br /><br />**anons** (text) - анонс<br /><br />**text** (text) - текст статьи<br /><br />**tags** (text) - теги<br /><br />**category** (text) - категория, выбранная копирайтером<br /><br />**image** (text) - картинка, прикреплённая к заказу<br /><br />**unique** (float) - значение уникальности текста (если была заказана проверка)
|deleteOrder|Удаляет заказ order_id|**order_id** (int) - уникальный идентификатор (номер) заказа.|
|rejectOrder|Отправить заказ на доработку|**order_id** (int) - уникальный идентификатор (номер) заказа<br /><br />**text** (text) - причина, по которой вы отправляете заказ на доработку|
|declineOrder|Отклонить заказ|**order_id** (int) - уникальный идентификатор (номер) заказа<br /><br />**text** (text) - причина, по которой вы отказываетесь от заказа|
|acceptOrder|Принять заказ|**order_id** (int) - уникальный идентификатор (номер) заказа<br /><br />**text** (text) - комментарий (необязательно)|
|moveOrder|Переместить заказ в определённую папку|**order_id** (int) - уникальный идентификатор (номер) заказа<br /><br />**folder_id** (int) - уникальный идентификатор папки, в которую нужно переместить заказ. |
|getConversation|Просмотереть общение по заказу|**order_id** (int) - уникальный идентификатор (номер) заказа|**messages_array** (array) - массив, содержащий список сообщений. Каждый элемент массива содержит:<br /><br />**from_id** (int) - ID пользователя от кого сообщение<br /><br />**date** (date) - дата отправки<br /><br />**text** (text) - текст сообщения


Работа со списками исполнителей
===============================
```php
$client->user();
```

|Метод|Описание|Входные данные|Выходные данные
|-----|--------|--------------|---------------
|getUser|Возвращает информацию о пользователе|**user_id** (int) - уникальный идентификатор пользователя|**user_name** (text) - ник пользователя<br /><br />**user_rating** (int) - рейтинг пользователя в системе<br /><br />**user_type** (int) - тип пользователя (1 - исполнитель, 2 - заказчик, 3 - корректор)
|getLists|Возвращает все белые списки пользователя||**lists** (array) - массив со списками <br /><br />**id** (int) - уникальный идентификатор списка<br /><br />**name** (text) - имя списка
|getList|Возвращает всех исполнителей, которые присутствуют в определённом белом списке|**list_id** (int) - уникальный идентификатор списка|**users** (array) - массив с исполнителями <br /><br />**user_id** (int) - уникальный идентификатор пользователя
|addToList|Добавляет пользователя в список|**list_id** (int) - уникальный идентификатор списка, в который нужно добавить пользователя<br /><br />**user_id** (int) - уникальный идентификатор пользователя|
|removeFromList|Удаляет пользователя из списка|**list_id** (int) - уникальный идентификатор списка, из которого нужно удалить пользователя<br /><br />**user_id** (int) - уникальный идентификатор пользователя|
|addToBlackList|Добавляет пользователя в черный список|**user_id** (int) - уникальный идентификатор пользователя|
|removeFromBlackList|Удаляет пользователя из черного списка|**user_id** (int) - уникальный идентификатор пользователя|


Работа с микрозадачами
======================
```php
$client->microTask();
```

|Метод|Описание|Входные данные|Выходные данные
|-----|--------|--------------|---------------
|getMicrotasksFolders|Возвращает все папки для микрозадач||**folders** (array) - массив с папками <br /><br />**id** (int) - уникальный идентификатор папки<br /><br />**name** (text) - имя папки
|createMicrotasksFolder|Создаёт новую папку для микрозадач|**name** (text) - имя новой папки|**folder_id** (int) - уникальный идентификатор созданной папки 
|getMicrotasksOrders|Возвращает все микрозадачи в папке folder_id. Если folder_id не указано, возвращает все микрозадачи. |**folder_id** (int) - уникальный идентификатор папки (необязательный параметр)|**orders** (array) - массив с микрозадачами <br /><br />**id** (int) - уникальный идентификатор (номер) задачи<br /><br />**name** (text) - название задачи<br /><br />**price** (float) - стоимость за выполнение задачи<br /><br />**active** (int) - статус задание (1 - активно, 0 – выключено)
|createMicrotask|Создаёт новую микрозадачу|**microtask_title** (text) - название микрозадачи<br /><br />**microtask_descr** (text) - подробное описание задания<br /><br />**microtask_price** (int) - стоимость задания в рублях (целое число больше или равное 2)<br /><br />**microtask_folder_id** (int) - идентификатор папки, в которую нужно добавить микрозадачу<br /><br />**microtask_time** (int) - количество часов за которое нужно выполнить микрозадачу (от 1 до 240). Необязательный параметр, значение по умолчанию - 12. <br /><br />**limit_per_user** (int) - лимит для одного исполнителя (сколько заданий может выполнить 1 исполнитель). 0 - без ограничений. Необязательный параметр, значение по умолчанию - 0. <br /><br />**limit_per_day** (int) - лимит в сутки. 0 - без ограничений. Необязательный параметр, значение по умолчанию - 0. <br /><br />**limit_total** (int) - лимит на общее количество выполнений задания. 0 - без ограничений. Необязательный параметр, значение по умолчанию - 0. <br /><br />**who_can_work** (int) - кто может выполнить заказ. 0 - любой исполнитель, 2 - только исполнители из белого списка (нужно указать id списка в поле who_can_work_value), 3 - только один определённый исполнитель (нужно указать id исполнителя в поле order_who_can_work_value). Параметр необязательный. Значение по умолчанию - 0. <br /><br />**who_can_work_value** (int) - в случае, если вы ограничили заказ, сделав его доступным определённой группе исполнителей параметром who_can_work, в этом параметре необходимо уточнить свой выбор: В случае, если вы хотите сделать заказ доступным только для определённого белого списка, то укажите id списка в этом поле. В случае, если вы хотите сделать персональный заказ только для одного конкретного исполнителя, то укажите в этом поле его id |**microtask_id** (int) - уникальный идентификатор созданной микрозадачи 
|getMicrotasksTasks|Возвращает все отчёты о выполненных заданиях, ожидающие проверки, для микрозадачи microtask_id. Если microtask_id не указано, возвращает все отчёты, ожидающие проверки. |**microtask_id** (int) - уникальный идентификатор микрозадачи (необязательный параметр)|**tasks** (array) - массив с отчётами <br /><br />**id** (int) - уникальный идентификатор (номер) отчёта<br /><br />**user_id** (int) - уникальный идентификатор исполнителя<br /><br />**price** (int) - стоимость за выполнение задачи<br /><br />**text** (text) - текст отчёта
|microtasksRejectTask|Отправить задание на доработку или отказаться от него|**task_id** (int) - уникальный идентификатор (номер) отчёта по задаче<br /><br />**text** (text) - причина, по которой вы отправляете задачу на доработку или отклоняете<br /><br />**decline** (int) - в случае, если параметр decline равен 1, то задание будет отклонено без возможности доработки. Необязательный параметр, значение по умолчанию - 0. |
|microtasksAcceptTask|Принять и оплатить задачу|**task_id** (int) - уникальный идентификатор (номер) отчёта по задаче|
|microtasksPause|Временно остановть выполнение микрозадачи|**task_id** (int) - уникальный идентификатор (номер) микрозадачи|
|microtasksPlay|Включить выполнение ранее остановленной микрозадачи|**task_id** (int) - уникальный идентификатор (номер) отчёта по задаче|


Работа с личными сообщениями
============================
```php
$client->message();
```

|Метод|Описание|Входные данные|Выходные данные
|-----|--------|--------------|---------------
|pmGetSent|Получить список пользователей, кому вы отправляли личные сообщения||
|pmGetReceived|Получить список пользователей, которые вам отправляли личные сообщения||
|pmSend|Отправить личное сообщение|**user_id** (int) - ID пользователя, которому нужно отправить сообщение<br /><br />**message** (text) - текст сообщения|
|pmGetConversation|Получить переписку с определённым пользователем|**user_id** (int) - ID пользователя, переписку с которым нужно получить|**messages_array** (array) - массив, содержащий список сообщений. Каждый элемент массива содержит:<br /><br />**from_id** (int) - ID пользователя от кого сообщение<br /><br />**to_id** (int) - ID пользователя кому сообщение<br /><br />**date** (date) - дата отправки<br /><br />**unread** (bool) - флаг прочитано сообщение или нет<br /><br />**text** (text) - текст сообщения


Внимание
========
На данный момент, не все методы были проверены на работоспособность, а так же нет автоматических тестов для проверки.  
До выходи релиза 1.0.0, работа клиента не гарантируется.